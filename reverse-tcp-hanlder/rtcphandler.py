import sys
import socket

h = sys.argv[1]
p = sys.argv[2]

def rtcphandler(host, port):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try:
        s.bind((host, port))
        s.list(1) # listen for incoming connections
        sys.stdout.write(f"[*] Listening on {host}:{port}")
        clsocket, addr = s.accept() # accept a connection from the client
        sys.stdout.write(f"[*] Accepted connection from {addr[0]}")
        while 1:
            data = clsocket.recv(1024) # receive data from client
            if not data:
                break
            sys.stdout.write(f"Received: {data.decode()}") # process received data
            response = "Message Received!" # edit the response message
            clsocket.send(response.encode()) # send the acknowledgement back
        clsocket.close()
    except socket.error as e:
        sys.stdout.write(f"Socket Error: {str(e)}")
    s.close()

if __name__ == "__main__":
    rtcphandler(h, p)
